# 不同格式的图片选择合适的适用场景

## 图片格式及适用

- JPEG：针对彩色照片而广泛使用的有损压缩图形格式；栅格图形  （.jpg, .jpeg, .jpe）    jpegtran

  - 不适合：

    > 线条图形和文字、图标图形，因为它的压缩算法不太适合这类图形；不支持透明度

  - 适合：

    > 颜色丰富的照片、彩色图、大焦点图、通栏 banner 图；结构不规则的图形

- PNG：一种无损压缩的位图图形格式，支持索引、灰度、RGB 三种颜色方案以及 Alpha 通道；最高支持 24 位彩色图像（PNG-24）和 8 位灰度图像（PNG-8）   node-pngquant-native

  - 不适合：

    > 由于是无损存储，色彩图像体积太大，所以不太合适

  - 适合：

    > 纯色、透明、线条绘图，图标；边缘清晰，有大块相同颜色区域；颜色数较少但需要半透明

- GIF：栅格图形，仅支持完全透明和完全不透明；可制作比较通用的动画   gifsicle  改变每帧比例，同时可以使用改变透明

  - 不适合：

    > 每个像素只有 8 比特，不适合存储彩色图片

  - 适合：

    > 动画、图标

- Webp：一种现代图像格式，可为图像提供有损压缩和无损压缩；无损的 Webp 比 PNG 小 26%；有损的 Webp 比 JPEG 小 25-34%；比 gif 有更好的动画

  - 不适合：

    > 最多处理 256 色，不适合于彩色图片

  - 适合：

    > 适用于图形和半透明图像

## 图片加载优化

- 图片压缩，图片尺寸根据网络和窗口改变，图片url地址上携带图片尺寸标识

- 响应式图片

  - js 检测窗口大小，动态加载不同的图片

  - css 媒体查询

  - img 标签 srcset

    <img srcset="img-320w.jpg,img-640w.jpg 2x,img-960w.jpg 3x" src="img-960w.jpg" /> (x描述符：表示图像的设备像素比)

- 逐步加载图像

  - 使用统一占位符（类似于骨架屏，可加载一个体积小的和公司相关的小图片）

  - 使用 LQIP       Low Quality Image Placeholders

    - 低质量图像占位符 （ npm 安装 lqip，生成对应的图片； npm i lqip）

  - 使用 SQIP  效果稍微好于 LQIP

    - 基于 svg 的图像占位符 （npm 安装 sqip，生成对应的svg；npm i sqip）

- Web font 代替图片 （iconfont一样的字体图标，svg）

- 使用 Data URI 代替图片 (base64)

- 采用 雪碧图

- **图片服务器自动优化**

  - 图片 url 上添加参数，让服务器生成不同不同格式、质量、大小的图片

  - 图片裁剪：按长、短边，填充，拉伸等缩放

  - 图片格式转换，支持不同的图片压缩率

  - 图片处理：添加水印、高斯模糊

  - ai 能力：鉴黄以及智能抠图


