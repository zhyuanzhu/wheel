# 浏览器的回流和重绘(Reflow & Repaint)

> 当 Render Tree 中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程称为回流，也称为重排

- 导致回流到操作

  - 页面首次渲染

  - 浏览器窗口大小发生改变

  - 元素尺寸或位置发生改变

  - 元素字体大小变化

  - 添加或者删除可见对 DOM 元素

  - 查询或调用某些特定的属性方法

> 当页面中元素的样式改变并不影响它在文档流中的位置时，浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘；例如设置 color, background-color, visibility


## CSS 

- 避免过多样式嵌套

- 避免使用 CSS 表达式

- 使用绝对定位，可以让动画元素脱离文档流

- 避免使用 table 布局

- 尽量不使用 float 布局

- 图片最好设置好 width 和 height

- 尽量简化浏览器不必要的任务，减少页面重新布局

- 使用 viewport 设置屏幕缩放级别

- 避免频繁设置样式，最好把新 style 属性设置完成后，进行一次性更改

- 避免使用引起回流、重绘的属性，最好把响应变量缓存起来

## 最小化回流和重排

- 为了减少回流发生次数，避免频繁或操作 DOM，可以合并多次对 DOM 修改，然后一次性批量处理

## 控制绘制过程和绘制区域

- 绘制过程开销比较大到属性设置应该尽量避免减少使用

- 减少绘制区域范围：修改指定区域，减少影响其他